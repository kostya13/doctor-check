# doctor-check

Скрипт для просмотра свободных номерков к врачу.
И сканер для ожидания новых номерков на сайте igis.ru

Работает на python 3.6

Сервис уведомления о свободной записи к врачу "Номеркождун"
Сайт https://doctor.kx13.ru

# Инструкция для пользователей

* Передать администратору логин и пароль
* В мессенджере Telegram или Viber подписаться на бота igismedbot
* Отправить боту сообщение в котором будет только ваш логин
* Получить уведомление от бота, что вы зарегистрированы
* Зайти на сайт со своми реквизитами
* Выбрать больницу и врача и нажать кнопку "Подписаться"
* Когда у врача появится доступные номерки вам придет уведомление

## Возможности для премиум аккаунтов

Если вы передали администратору так же Имя, Фамилию, полис пациента, то данный сервис может
автоматически записать пациента к врачу, как только появится свободный номерок.
Или можно подписыватсья на врача прямо с сайта.

# Как добавить нового пользователя

При регистрации необходимо предоставить логин для уведомлений.
Логин и пароль пользователя заносятся в файл auth.json
После этого пользователь может зарегистрировать свой мессенджер в системе.
Для подключиться к боту igismedbot и отправить ему свой логин. 
Поддерживаются Telegram и Viber
Если пользватель уже зарегистрирован, то если отправить команду /pass бот пришлет пароль пользователя

Если необходима автозапись список лиц с номером полиса в формате:
Фамилия Имя номер-полиса
должен быть занесен в раздел "auth" пользователя в файле auth.json

# Настройка мессенджеров

Для того, чтобы настроить вебхуки для мессенджеров, сначала в файле tokens.py надо внести
правильные токены для мессенджеров.
Далее в фаилах *botsetup.py прописать правиьлный путь до вебхука.
И запустить эти файлы.
